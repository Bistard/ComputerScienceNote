# 阿姆达尔定律 - Amdahl's Law

为了描述“提升一个系统的某个$x$功能的性能对整个系统有多大影响”，Gene Amdahl将其主要原因分类成两点：

1. 这个$x$功能有多重要?
2. 这个$x$功能性能提升了多少?


$$
S = \frac{1}{(1 - \alpha) + \frac{\alpha}{k}}
$$

* $S$: 整个系统性能提升的倍数。
* $\alpha$: 功能$x$占整个系统运行时间的比例。
* $k$: 功能$x$性能提升的倍数。

> 假设原来整个系统执行需要时间$T_{old}$. 其中功能$x$占其中的运行时间的百分比为$\alpha$，所以功能$x$占用总时间为$\alpha T_{old}$. 然后我们将$x$性能提升$k$倍，那么现在$x$占用时间百分比为$\frac{\alpha}{k}T_{old}$.
>
> 已知$x$占用运行时间百分比为$\alpha$, 那么其他部分总时间占比例为$(1-\alpha)$. 所以占用总时间为$(1-\alpha)T_{old}$.
>
> 因此我们可以计算出系统在提升了功能$x$的性能后的总运行时间:
> $$
> \begin{align*}
> T_{new} 
> &= (1-\alpha)T_{old} + \frac{\alpha}{k}T_{old} \\
> &= T_{old}((1-\alpha) + \frac{\alpha}{k}).
> \end{align*}
> $$
>
> 故可得，系统性能提升的总系数为：
> $$
> S = \frac{1}{(1-\alpha) + \frac{\alpha}{k}}.
> $$

# 案例

假设某功能$x$提升了$3$倍，且$x$占总系统运行时间为$\alpha = \frac{1}{3}$. 套入公式得:
$$
S = \frac{1}{(1- \frac{1}{3}) + \frac{\frac{1}{3}}{3}} = \frac{9}{7}
$$
故可得，系统总运行时间提升了差不多$1.28$倍。

# 系统的效率提升上限

延续刚刚的案例，假设某功能$x$提升了$\infty$倍，套入公式得：
$$
S = \frac{1}{(1- \frac{1}{3}) + \frac{\frac{1}{3}}{\infty}} = \frac{3}{2} = 1.5.
$$
哪怕我们将$x$的运行效率拉到极致，你会发现整个系统的提升空间也是有上限的，在这个案例中，上线就是$1.5$倍。


# Reference
* https://zhuanlan.zhihu.com/p/48022905